<app-spinner *ngIf="executaSpinner"></app-spinner>

<div class="container">
  <div class="file-upload">
    <label class="file-input-label">
      <i class="fas fa-cloud-upload-alt"></i>
      <span>
        <input type="file" id="file-input" (change)="onFileSelected(fileInput)" #fileInput accept="application/pdf">
        {{ fileName || 'Escolha o arquivo...' }}
      </span>
    </label>
  </div>
</div>

<div>
  <h1>Definição de Paginas</h1>
  <div *ngFor="let pdf of pdfPages; let i = index">
    {{ i }}
  </div>
</div>

<div style="text-align: right;" *ngIf="areas.length > 0">
  <button mat-raised-button color="primary" (click)="submit()">
    SALVAR
  </button>
</div>

<div *ngFor="let area of areas">
  <div class="pdf-container" #pdfPreview>
    <div [id]="area.id" class="drop-area" cdkDropList [cdkDropListData]="area.pages"
      [cdkDropListConnectedTo]="getConnectedList(area.id)" (cdkDropListDropped)="drop($event)">
      <ng-container *ngFor="let page of area.pages;">
        <div class="page-container" cdkDrag>
          <img width="200" height="300" [src]="page.newPage" alt="Page {{ page.number + 1 }}" class="clickable-image"
            (click)="showImageInLightbox(page.newPage)">
          <span class="page-number">Pagina {{ page.number + 1 }}</span>
        </div>
      </ng-container>
    </div>
  </div>
</div>

<!-- Lightbox -->
<div id="lightbox" (click)="hideLightbox()">
  <img [src]="currentImage" alt="Ampliada">
</div>
